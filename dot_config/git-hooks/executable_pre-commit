#!/bin/sh

if [ -f .pre-commit-config.yaml ]; then
    HOOK="$(git rev-parse --git-common-dir)/hooks/pre-commit"
    if [ -f "$HOOK" ] && grep -q "pre-commit" "$HOOK" 2>/dev/null; then
        exec pre-commit run --hook-stage commit
    else
        echo "PRE-COMMIT HOOKS NOT INSTALLED" >&2
        echo "Run: git install-pre-commit" >&2
        exit 1
    fi
fi

if [ -f .pre-commit-config.yml ]; then
    echo ".pre-commit-config.yaml misnamed .yml" >&2
    exit 1
fi

exit 0
